app-id: net.damonlynch.rapid_photo_downloader
runtime: org.kde.Platform
runtime-version: 5.15-23.08
sdk: org.kde.Sdk
base: com.riverbankcomputing.PyQt.BaseApp
base-version: 5.15-23.08
cleanup-commands:
  - /app/cleanup-BaseApp.sh
command: rapid-photo-downloader
finish-args:
  - --share=ipc
  - --socket=wayland
  - --socket=fallback-x11
  - --socket=pulseaudio
  - --share=network
  - --device=all
  - --device=dri
  - --filesystem=host
  - --filesystem=xdg-download
  - --talk-name=org.freedesktop.Notifications
  - --talk-name=org.kde.StatusNotifierWatcher
  - --talk-name=org.freedesktop.portal.FileChooser
  - --talk-name=com.canonical.AppMenu.Registrar
  - --talk-name=com.canonical.Unity
  - --talk-name=com.canonical.indicator.application
  - --talk-name=org.ayatana.indicator.application
  - --unset-env=XDG_DATA_HOME
  - --env=QT_PLUGIN_PATH=/app/lib64/plugins:/app/lib/plugins
  - --env=QTWEBENGINEPROCESS_PATH=/app/bin/QtWebEngineProcess
  - --env=PERL5LIB=/app/lib/perl5/site_perl/5.36.0/
  - --system-talk-name=org.freedesktop.UDisks2
  - --talk-name=org.freedesktop.DBus.Introspectable.*

modules:
  - shared-modules/intltool/intltool-0.51.json
  - shared-modules/gudev/gudev.json

  - name: python-setuptools
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/df/b5/168cec9a10bf93b60b8f9af7f4e61d526e31e1aad8b9be0e30837746d700/setuptools-74.0.0-py3-none-any.whl
        sha256: 0274581a0037b638b9fc1c6883cc71c0210865aaa76073f7882376b641b84e8f
        x-checker-data:
          type: pypi
          name: setuptools
          packagetype: bdist_wheel

  - name: python3-psutil
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/18/c7/8c6872f7372eb6a6b2e4708b88419fb46b857f7a2e1892966b851cc79fc9/psutil-6.0.0.tar.gz
        sha256: 8faae4f310b6d969fa26ca0545338b21f73c6b15db7c4a8d934a5482faa818f2
        x-checker-data:
          type: pypi
          name: psutil
          packagetype: sdist

  - name: python3-gphoto2
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/d9/e0/03167246c2d32d2b646cbd7f1bf424e3e0b52c319d5cc2d72da3998ed141/gphoto2-2.5.0.tar.gz
        sha256: 97d07a3c42067fcae4525600a4ecad5b6b3d3a181cc4c1d594381f411e599e80
        x-checker-data:
          type: pypi
          name: gphoto2
          packagetype: sdist

  - name: rapid-photo-downloader
    buildsystem: simple
    build-commands:
      - pip3 install --prefix=${FLATPAK_DEST} .
    sources:
      - type: archive
        url: https://launchpad.net/rapid/pyqt/0.9.36/+download/rapid-photo-downloader-0.9.36.tar.gz
        sha256: a3dc363ee2bb931a4ba76d65ec136adda7d1fe99af2e59c90057ce0c842765e4
