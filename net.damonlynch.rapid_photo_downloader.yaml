app-id: net.damonlynch.rapid_photo_downloader
runtime: org.kde.Platform
runtime-version: 5.15-23.08
sdk: org.kde.Sdk
base: com.riverbankcomputing.PyQt.BaseApp
base-version: 5.15-23.08
cleanup-commands:
  - /app/cleanup-BaseApp.sh
command: rapid-photo-downloader
finish-args:
  - --share=ipc
  - --socket=wayland
  - --socket=fallback-x11
  - --socket=pulseaudio
  - --share=network
  - --device=all
  - --device=dri
  - --filesystem=host
  - --filesystem=xdg-download
  - --talk-name=org.freedesktop.Notifications
  - --talk-name=org.kde.StatusNotifierWatcher
  - --talk-name=org.freedesktop.portal.FileChooser
  - --talk-name=com.canonical.AppMenu.Registrar
  - --talk-name=com.canonical.Unity
  - --talk-name=com.canonical.indicator.application
  - --talk-name=org.ayatana.indicator.application
  - --unset-env=XDG_DATA_HOME
  - --env=QT_PLUGIN_PATH=/app/lib64/plugins:/app/lib/plugins
  - --env=QTWEBENGINEPROCESS_PATH=/app/bin/QtWebEngineProcess
  - --env=PERL5LIB=/app/lib/perl5/site_perl/5.36.0/
  - --system-talk-name=org.freedesktop.UDisks2
  - --talk-name=org.freedesktop.DBus.Introspectable.*

modules:
  - shared-modules/intltool/intltool-0.51.json
  - shared-modules/gudev/gudev.json

  - name: python-modules
    sources:
      - type: file
        url: https://files.pythonhosted.org/packages/df/b5/168cec9a10bf93b60b8f9af7f4e61d526e31e1aad8b9be0e30837746d700/setuptools-74.0.0-py3-none-any.whl
        sha256: 0274581a0037b638b9fc1c6883cc71c0210865aaa76073f7882376b641b84e8f
        x-checker-data:
          type: pypi
          name: setuptools
          packagetype: bdist_wheel

      - type: file
        url: https://files.pythonhosted.org/packages/54/ed/79a089b6be93607fa5cdaedf301d7dfb23af5f25c398d5ead2525b063e17/pyyaml-6.0.2.tar.gz
        sha256: d584d9ec91ad65861cc08d42e834324ef890a082e591037abe114850ff7bbc3e
        x-checker-data:
          type: pypi
          name: PyYAML
          packagetype: sdist

      - type: file
        url: https://files.pythonhosted.org/packages/f1/34/27cbd1fce02029f470554cf56dc19e0180bb14927dedd35375be691d4d2d/vdf-3.2-py2.py3-none-any.whl
        sha256: 8e0d33ebe0bafd991be3236ce1bd211e368e9a2b8bc376dacd5f6b77066afb90
        x-checker-data:
          type: pypi
          name: vdf
          versions:
            ==: '3.2'
          packagetype: bdist_wheel

      - type: file
        url: https://files.pythonhosted.org/packages/3e/02/b09732ca4b14405ff159c470a612979acfc6e8645dc32f83ea0129709f7a/Pillow-7.2.0.tar.gz
        sha256: 97f9e7953a77d5a70f49b9a48da7776dc51e9b738151b22dacf101641594a626
        x-checker-data:
          type: pypi
          name: Pillow
          packagetype: bdist_wheel

      - type: file
        url: https://files.pythonhosted.org/packages/4a/e3/9530128acefe411b47c00ee6d970f4f0f63a8bee7e1699529bf8893823a1/borgbackup-1.2.0rc1.tar.gz
        sha256: 95230fbdb8fba37157e394a10e26e97dbad4ebfa27e2e453ec61a0d90a0d559e
        x-checker-data:
          type: pypi
          name: borgbackup
          versions: {<: '1.2'}
          stable-only: false

      - type: file
        url: https://files.pythonhosted.org/packages/31/1a/da104fca8bac26dd689c58aed052c4aa50312bab13785dda82f061832852/borgbackup-1.1.18.tar.gz
        sha256: 5cba5fe7db4d08944b467ec11efc017687a512b0d98ccf0ad1aa9c4329665275
        x-checker-data:
          type: pypi
          name: borgbackup
          versions: {<: '1.2'}
          stable-only: true

  - name: rapid-photo-downloader
    buildsystem: simple
    build-commands:
      - pip3 install --prefix=${FLATPAK_DEST} .
    sources:
      - type: archive
        url: https://launchpad.net/rapid/pyqt/0.9.36/+download/rapid-photo-downloader-0.9.36.tar.gz
        sha256: a3dc363ee2bb931a4ba76d65ec136adda7d1fe99af2e59c90057ce0c842765e4
